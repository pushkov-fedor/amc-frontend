{"version":3,"sources":["constants.js","components/QueueForm.jsx","components/QueueLineInfo.jsx","components/QueueNumber.jsx","components/QueueInfo.jsx","App.jsx","index.js"],"names":["URL","QueueForm","useState","name","setName","phone","setPhone","people","setPeople","timeH","setTimeH","timeM","setTimeM","queueId","window","AndroidFunction","getId","history","useHistory","className","htmlFor","type","id","placeholder","value","onChange","e","target","onClick","preventDefault","prev","class","min","max","step","fetch","headers","Accept","method","then","response","ok","Error","statusText","json","queueInnerId","beforeYou","push","pathname","state","catch","err","console","error","back","QueueLineInfo","label","QueueNumber","number","updateInnerQueueInfo","innerQueueId","setBeforeYou","setCode","setWaitingTime","setPlace","res","code","place","waitingTime","withRouter","props","location","useEffect","intervalId","setInterval","clearInterval","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7f440f10.chunk.js","sourcesContent":["export const URL = \"https://amcbackend.avocadoonline.company\";\n","import React, { useState } from \"react\";\nimport \"./queue-form.css\";\nimport { useHistory } from \"react-router\";\nimport { URL } from \"../constants\";\n\nexport default function QueueForm() {\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [people, setPeople] = useState(1);\n  const [timeH, setTimeH] = useState(20);\n  const [timeM, setTimeM] = useState(35);\n\n  const queueId = window.AndroidFunction\n    ? window.AndroidFunction.getId()\n    : \"5f53cb41900ab5746f165089\";\n\n  const history = useHistory();\n\n  return (\n    <div className=\"queueForm d-flex flex-column\">\n      <form className=\"queueForm__form d-flex flex-column justify-content-center\">\n        <h1 className=\"text-center big-header bold pb-3\">\n          Хочу посетить заведение\n        </h1>\n        <label htmlFor=\"name\">ИМЯ</label>\n        <input\n          className=\"mb-3\"\n          type=\"text\"\n          id=\"name\"\n          placeholder=\"Иван\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n        <label htmlFor=\"phone\">ТЕЛЕФОН</label>\n        <input\n          className=\"mb-3\"\n          type=\"tel\"\n          id=\"phone\"\n          placeholder=\"89139036130\"\n          value={phone}\n          onChange={(e) => setPhone(e.target.value)}\n        />\n        <label htmlFor=\"people-counter\">СКОЛЬКО ВАС БУДЕТ?</label>\n        <div id=\"people-counter\" className=\"d-flex align-items-center mb-3\">\n          <button\n            className=\"mr-3 border-purple text-purple bg-white d-flex align-items-center justify-content-center\"\n            onClick={(e) => {\n              e.preventDefault();\n              setPeople((prev) => prev - 1);\n            }}\n          >\n            <i class=\"fas fa-minus fa-2x\"></i>\n          </button>\n          <input\n            className=\"text-center\"\n            type=\"number\"\n            name=\"\"\n            id=\"\"\n            value={people}\n            onChange={(e) => setPeople(e.target.value)}\n          />\n          <button\n            className=\"ml-3 bg-purple text-white d-flex align-items-center justify-content-center\"\n            onClick={(e) => {\n              e.preventDefault();\n              setPeople((prev) => prev + 1);\n            }}\n          >\n            <i class=\"fas fa-plus fa-lg\"></i>\n          </button>\n        </div>\n        <label htmlFor=\"people-counter\">ВРЕМЯ ПОСЕЩЕНИЯ</label>\n        <div id=\"visit-time\">\n          <input\n            className=\"text-center mr-2\"\n            type=\"number\"\n            name=\"timeH\"\n            id=\"timeH\"\n            min=\"0\"\n            max=\"23\"\n            step=\"1\"\n            value={timeH}\n            onChange={(e) =>\n              e.target.value >= 0 && e.target.value <= 23\n                ? setTimeH(e.target.value)\n                : null\n            }\n          />\n          <span>:</span>\n          <input\n            className=\"text-center ml-2\"\n            type=\"number\"\n            name=\"timeM\"\n            id=\"timeM\"\n            min=\"0\"\n            max=\"59\"\n            step=\"1\"\n            value={timeM}\n            onChange={(e) =>\n              e.target.value >= 0 && e.target.value <= 59\n                ? setTimeM(e.target.value)\n                : null\n            }\n          />\n        </div>\n      </form>\n      <div className=\"queueForm__controls d-flex flex-column\">\n        <button\n          className=\"mt-3 btn bg-purple text-white medium\"\n          onClick={() => {\n            fetch(`${URL}/queue/join?queueId=${queueId}`, {\n              headers: {\n                Accept: \"application/json\",\n              },\n              method: \"POST\",\n            })\n              .then((response) => {\n                if (!response.ok) throw Error(response.statusText);\n                return response.json();\n              })\n              .then(({ response }) => {\n                const { queueInnerId, beforeYou } = response;\n                history.push({\n                  pathname: \"/queue-info\",\n                  state: { queueInnerId, beforeYou },\n                });\n              })\n              .catch((err) => console.error(err));\n          }}\n        >\n          ВСТАТЬ В ОЧЕРЕДИ\n        </button>\n        <button\n          className=\"mt-2 btn bg-white text-purple border-purple medium\"\n          onClick={() => {\n            if (window.AndroidFunction) {\n              window.AndroidFunction.back();\n            }\n          }}\n        >\n          НАЗАД\n        </button>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nconst QueueLineInfo = ({ label, value }) => {\n  return (\n    <div className=\"queueLineContainer\">\n      <div className=\"left w-50\">\n        <h3>{label}</h3>\n      </div>\n      <div className=\"right w-50\">\n        <h3>{value}</h3>\n      </div>\n    </div>\n  );\n};\n\nexport default QueueLineInfo;\n","import React from \"react\";\n\nconst QueueNumber = ({ number }) => {\n  return (\n    <div className=\"queueNumberContainer text-center my-5\">\n      <h3>Ваш номер</h3>\n      <h1>{number}</h1>\n    </div>\n  );\n};\n\nexport default QueueNumber;\n","import React, { useState, useEffect } from \"react\";\nimport QueueLineInfo from \"./QueueLineInfo\";\nimport QueueNumber from \"./QueueNumber\";\nimport { useHistory, withRouter } from \"react-router\";\nimport { URL } from \"../constants\";\n\nconst updateInnerQueueInfo = (\n  innerQueueId,\n  setBeforeYou,\n  setCode,\n  setWaitingTime,\n  setPlace\n) => {\n  innerQueueId &&\n    fetch(`${URL}/queue/getStatus?innerQueueId=${innerQueueId}`)\n      .then((res) => {\n        if (!res.ok) throw new Error(res.statusText);\n        return res.json();\n      })\n      .then(({ response }) => {\n        const { beforeYou, code, place, waitingTime } = response;\n        setBeforeYou(beforeYou);\n        setCode(code);\n        setWaitingTime(waitingTime);\n        setPlace(place);\n      })\n      .catch((err) => console.error(err));\n};\n\nconst QueueInfo = (props) => {\n  const history = useHistory();\n  const innerQueueId =\n    props.location && props.location.state\n      ? props.location.state.queueInnerId\n      : null;\n  const [beforeYou, setBeforeYou] = useState(\n    props.location && props.location.state ? props.location.state.beforeYou : -1\n  );\n  const [code, setCode] = useState(\"\");\n  const [waitingTime, setWaitingTime] = useState(0);\n  const [place, setPlace] = useState(\"\");\n\n  useEffect(() => {\n    updateInnerQueueInfo(\n      innerQueueId,\n      setBeforeYou,\n      setCode,\n      setWaitingTime,\n      setPlace\n    );\n    const intervalId = setInterval(\n      () =>\n        updateInnerQueueInfo(\n          innerQueueId,\n          setBeforeYou,\n          setCode,\n          setWaitingTime,\n          setPlace\n        ),\n      5000\n    );\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [innerQueueId]);\n  return (\n    <div className=\"queueInfoContainer d-flex flex-column\">\n      <div className=\"queueInfoContainer__container d-flex flex-column justify-content-center align-itesms-center\">\n        <h1 className=\"text-center big-header bold\">\n          Вы заняли очередь на посещение\n        </h1>\n        <QueueNumber number={code} />\n        <QueueLineInfo label=\"Заведение\" value={place} />\n        <QueueLineInfo label=\"Время ожидания\" value={`~ ${waitingTime} мин.`} />\n        <QueueLineInfo label=\"Перед вами\" value={`${beforeYou} чел.`} />\n      </div>\n      <div className=\"queueInfoContainer__controls\">\n        <button\n          className=\"btn bg-purple text-white w-100 mt-3 medium\"\n          onClick={() => {\n            fetch(`${URL}/queue/leave?innerQueueId=${innerQueueId}`, {\n              headers: {\n                Accept: \"application/json\",\n              },\n              method: \"POST\",\n            });\n            history.push(\"/\");\n          }}\n        >\n          ПОКИНУТЬ ОЧЕРЕДЬ\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(QueueInfo);\n","import React from \"react\";\nimport QueueForm from \"./components/QueueForm\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport QueueInfo from \"./components/QueueInfo\";\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <div className=\"container\">\n          <Switch>\n            <Route path=\"/\">\n              <QueueForm />\n            </Route>\n            <Route path=\"/queue-info\">\n              <QueueInfo />\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n// Put any other imports below so that CSS from your\n// components takes precedence over default styles.\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}