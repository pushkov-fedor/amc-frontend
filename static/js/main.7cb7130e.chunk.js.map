{"version":3,"sources":["constants.js","components/QueueForm.jsx","components/QueueLineInfo.jsx","components/QueueNumber.jsx","components/QueueInfo.jsx","App.jsx","index.js"],"names":["URL","QueueForm","useState","name","setName","phone","setPhone","people","setPeople","timeH","setTimeH","timeM","setTimeM","queueId","window","AndroidFunction","getId","history","useHistory","className","htmlFor","type","id","placeholder","value","onChange","e","target","onClick","preventDefault","prev","class","min","max","step","fetch","headers","Accept","method","then","response","ok","Error","statusText","json","queueInnerId","beforeYou","push","pathname","state","catch","err","console","error","back","QueueLineInfo","label","QueueNumber","number","updateInnerQueueInfo","innerQueueId","setBeforeYou","setCode","setWaitingTime","setPlace","res","code","place","waitingTime","withRouter","props","location","useEffect","intervalId","setInterval","clearInterval","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7cb7130e.chunk.js","sourcesContent":["export const URL = \"https://amcbackend.avocadoonline.company\";\r\n","import React, { useState } from \"react\";\r\nimport \"./queue-form.css\";\r\nimport { useHistory } from \"react-router\";\r\nimport { URL } from \"../constants\";\r\n\r\nexport default function QueueForm() {\r\n  const [name, setName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [people, setPeople] = useState(1);\r\n  const [timeH, setTimeH] = useState(20);\r\n  const [timeM, setTimeM] = useState(35);\r\n\r\n  const queueId = window.AndroidFunction\r\n    ? window.AndroidFunction.getId()\r\n    : \"5f53cb41900ab5746f165089\";\r\n\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <div className=\"queueForm d-flex flex-column\">\r\n      <form className=\"queueForm__form d-flex flex-column justify-content-center\">\r\n        <h1 className=\"text-center big-header bold pb-3\">\r\n          Хочу посетить заведение\r\n        </h1>\r\n        <label htmlFor=\"name\">ИМЯ</label>\r\n        <input\r\n          className=\"mb-3\"\r\n          type=\"text\"\r\n          id=\"name\"\r\n          placeholder=\"Иван\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <label htmlFor=\"phone\">ТЕЛЕФОН</label>\r\n        <input\r\n          className=\"mb-3\"\r\n          type=\"tel\"\r\n          id=\"phone\"\r\n          placeholder=\"89139036130\"\r\n          value={phone}\r\n          onChange={(e) => setPhone(e.target.value)}\r\n        />\r\n        <label htmlFor=\"people-counter\">СКОЛЬКО ВАС БУДЕТ?</label>\r\n        <div id=\"people-counter\" className=\"d-flex align-items-center mb-3\">\r\n          <button\r\n            className=\"mr-3 border-purple text-purple bg-white d-flex align-items-center justify-content-center\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setPeople((prev) => prev - 1);\r\n            }}\r\n          >\r\n            <i class=\"fas fa-minus fa-2x\"></i>\r\n          </button>\r\n          <input\r\n            className=\"text-center\"\r\n            type=\"number\"\r\n            name=\"\"\r\n            id=\"\"\r\n            value={people}\r\n            onChange={(e) => setPeople(e.target.value)}\r\n          />\r\n          <button\r\n            className=\"ml-3 bg-purple text-white d-flex align-items-center justify-content-center\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setPeople((prev) => prev + 1);\r\n            }}\r\n          >\r\n            <i class=\"fas fa-plus fa-lg\"></i>\r\n          </button>\r\n        </div>\r\n        <label htmlFor=\"people-counter\">ВРЕМЯ ПОСЕЩЕНИЯ</label>\r\n        <div id=\"visit-time\">\r\n          <input\r\n            className=\"text-center mr-2\"\r\n            type=\"number\"\r\n            name=\"timeH\"\r\n            id=\"timeH\"\r\n            min=\"0\"\r\n            max=\"23\"\r\n            step=\"1\"\r\n            value={timeH}\r\n            onChange={(e) =>\r\n              e.target.value >= 0 && e.target.value <= 23\r\n                ? setTimeH(e.target.value)\r\n                : null\r\n            }\r\n          />\r\n          <span>:</span>\r\n          <input\r\n            className=\"text-center ml-2\"\r\n            type=\"number\"\r\n            name=\"timeM\"\r\n            id=\"timeM\"\r\n            min=\"0\"\r\n            max=\"59\"\r\n            step=\"1\"\r\n            value={timeM}\r\n            onChange={(e) =>\r\n              e.target.value >= 0 && e.target.value <= 59\r\n                ? setTimeM(e.target.value)\r\n                : null\r\n            }\r\n          />\r\n        </div>\r\n      </form>\r\n      <div className=\"queueForm__controls d-flex flex-column\">\r\n        <button\r\n          className=\"mt-3 btn bg-purple text-white medium\"\r\n          onClick={() => {\r\n            fetch(`${URL}/queue/join?queueId=${queueId}`, {\r\n              headers: {\r\n                Accept: \"application/json\",\r\n              },\r\n              method: \"POST\",\r\n            })\r\n              .then((response) => {\r\n                if (!response.ok) throw Error(response.statusText);\r\n                return response.json();\r\n              })\r\n              .then(({ response }) => {\r\n                const { queueInnerId, beforeYou } = response;\r\n                history.push({\r\n                  pathname: \"/queue-info\",\r\n                  state: { queueInnerId, beforeYou },\r\n                });\r\n              })\r\n              .catch((err) => console.error(err));\r\n          }}\r\n        >\r\n          ВСТАТЬ В ОЧЕРЕДИ\r\n        </button>\r\n        <button\r\n          className=\"mt-2 btn bg-white text-purple border-purple medium\"\r\n          onClick={() => {\r\n            if (window.AndroidFunction) {\r\n              window.AndroidFunction.back();\r\n            }\r\n          }}\r\n        >\r\n          НАЗАД\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst QueueLineInfo = ({ label, value }) => {\r\n  return (\r\n    <div className=\"queueLineContainer\">\r\n      <div className=\"left w-50\">\r\n        <h3>{label}</h3>\r\n      </div>\r\n      <div className=\"right w-50\">\r\n        <h3>{value}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QueueLineInfo;\r\n","import React from \"react\";\r\n\r\nconst QueueNumber = ({ number }) => {\r\n  return (\r\n    <div className=\"queueNumberContainer text-center my-5\">\r\n      <h3>Ваш номер</h3>\r\n      <h1>{number}</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QueueNumber;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport QueueLineInfo from \"./QueueLineInfo\";\r\nimport QueueNumber from \"./QueueNumber\";\r\nimport { useHistory, withRouter } from \"react-router\";\r\nimport { URL } from \"../constants\";\r\n\r\nconst updateInnerQueueInfo = (\r\n  innerQueueId,\r\n  setBeforeYou,\r\n  setCode,\r\n  setWaitingTime,\r\n  setPlace\r\n) => {\r\n  innerQueueId &&\r\n    fetch(`${URL}/queue/getStatus?innerQueueId=${innerQueueId}`)\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error(res.statusText);\r\n        return res.json();\r\n      })\r\n      .then(({ response }) => {\r\n        const { beforeYou, code, place, waitingTime } = response;\r\n        setBeforeYou(beforeYou);\r\n        setCode(code);\r\n        setWaitingTime(waitingTime);\r\n        setPlace(place);\r\n      })\r\n      .catch((err) => console.error(err));\r\n};\r\n\r\nconst QueueInfo = (props) => {\r\n  const history = useHistory();\r\n  const innerQueueId =\r\n    props.location && props.location.state\r\n      ? props.location.state.queueInnerId\r\n      : null;\r\n  const [beforeYou, setBeforeYou] = useState(\r\n    props.location && props.location.state ? props.location.state.beforeYou : -1\r\n  );\r\n  const [code, setCode] = useState(\"\");\r\n  const [waitingTime, setWaitingTime] = useState(0);\r\n  const [place, setPlace] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    updateInnerQueueInfo(\r\n      innerQueueId,\r\n      setBeforeYou,\r\n      setCode,\r\n      setWaitingTime,\r\n      setPlace\r\n    );\r\n    const intervalId = setInterval(\r\n      () =>\r\n        updateInnerQueueInfo(\r\n          innerQueueId,\r\n          setBeforeYou,\r\n          setCode,\r\n          setWaitingTime,\r\n          setPlace\r\n        ),\r\n      5000\r\n    );\r\n    return () => {\r\n      clearInterval(intervalId);\r\n    };\r\n  }, [innerQueueId]);\r\n  return (\r\n    <div className=\"queueInfoContainer d-flex flex-column\">\r\n      <div className=\"queueInfoContainer__container d-flex flex-column justify-content-center align-itesms-center\">\r\n        <h1 className=\"text-center big-header bold\">\r\n          Вы заняли очередь на посещение\r\n        </h1>\r\n        <QueueNumber number={code} />\r\n        <QueueLineInfo label=\"Заведение\" value={place} />\r\n        <QueueLineInfo label=\"Время ожидания\" value={`~ ${waitingTime} мин.`} />\r\n        <QueueLineInfo label=\"Перед вами\" value={`${beforeYou} чел.`} />\r\n      </div>\r\n      <div className=\"queueInfoContainer__controls\">\r\n        <button\r\n          className=\"btn bg-purple text-white w-100 mt-3 medium\"\r\n          onClick={() => {\r\n            fetch(`${URL}/queue/leave?innerQueueId=${innerQueueId}`, {\r\n              headers: {\r\n                Accept: \"application/json\",\r\n              },\r\n              method: \"POST\",\r\n            });\r\n            history.push(\"/\");\r\n          }}\r\n        >\r\n          ПОКИНУТЬ ОЧЕРЕДЬ\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(QueueInfo);\r\n","import React from \"react\";\r\nimport QueueForm from \"./components/QueueForm\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport QueueInfo from \"./components/QueueInfo\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <div className=\"container\">\r\n          <Switch>\r\n            <Route path=\"/\">\r\n              <QueueForm />\r\n            </Route>\r\n            <Route path=\"/queue-info\">\r\n              <QueueInfo />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n// Put any other imports below so that CSS from your\n// components takes precedence over default styles.\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}